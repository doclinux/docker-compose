# /opt/docker-compose.yml
---
version: '2'
services:
        docker-proxy:
                image: jwilder/nginx-proxy:latest
                container_name: docker-proxy
                volumes:
                - /dockerfiles/ssl-certs:/etc/nginx/certs
                - /dockerfiles/nginx-proxy/:/etc/nginx/vhost.d/
                - /var/run/docker.sock:/tmp/docker.sock
                - /etc/nginx/vhost.d
                - /usr/share/nginx/html
                restart: always
                ports:
                - 80:80
                - 443:443
                network_mode: "bridge"
        docker-proxy-sslgen:
                image: jrcs/letsencrypt-nginx-proxy-companion
                container_name: docker-proxy-sslgen
                depends_on:
                - docker-proxy
                volumes:
                - /var/run/docker.sock:/var/run/docker.sock:ro
                volumes_from:
                - docker-proxy:rw
                network_mode: "bridge"
        tt-rss:
                image: linuxserver/tt-rss
                container_name: tt-rss
                volumes:
                - /dockerfiles/ttrss:/config
                restart: always
                ports:
                - 8082:80
                environment:
                - PGID=501
                - PUID=501
                - LETSENCRYPT_HOST=tt-rss.thechurchills.org.uk
                - LETSENCRYPT_EMAIL=terry@thechurchills.org.uk
                - VIRTUAL_HOST=tt-rss.thechurchills.org.uk
                - TZ=Europe/London
                network_mode: "bridge"
        nzbhydra:
                image: linuxserver/hydra2
                container_name: nzbhydra
                volumes:
                - /dockerfiles/nzbhydra:/config
                - /etc/localtime:/etc/localtime:ro
                restart: always
                ports:
                - 5076:5076
                environment:
                - PGID=501
                - PUID=501
                - LETSENCRYPT_HOST=nzbhydra.thechurchills.org.uk
                - LETSENCRYPT_EMAIL=terry@thechurchills.org.uk
                - VIRTUAL_HOST=nzbhydra.thechurchills.org.uk
                - TZ=Europe/London
                network_mode: "bridge"
        nzbget:
                image: linuxserver/nzbget
                container_name: nzbget
                volumes:
                - /dockerfiles/nzbget:/config
                - /home/terry/downloads/:/downloads
                - /dockerfiles/nzbtemp/:/intermediate
                restart: always
                ports:
                - 6789:6789
                environment:
                - PGID=501
                - PUID=501
                - LETSENCRYPT_HOST=nzbget.thechurchills.org.uk
                - LETSENCRYPT_EMAIL=terry@thechurchills.org.uk
                - VIRTUAL_HOST=nzbget.thechurchills.org.uk
                - TZ=Europe/London
                network_mode: "bridge"
        radarr:
                image: linuxserver/radarr:preview
                container_name: radarr
                volumes:
                - /home/terry/downloads:/done
                - /dockerfiles/radarr:/config
                - /home/terry/downloads:/downloads
                - /mnt/RAID/Movies:/movies
                - /dev/rtc:/dev/rtc:ro
                restart: always
                ports:
                - 5050:7878
                environment:
                - PGID=501
                - PUID=501
                - LETSENCRYPT_HOST=radarr.thechurchills.org.uk
                - LETSENCRYPT_EMAIL=terry@thechurchills.org.uk
                - VIRTUAL_HOST=radarr.thechurchills.org.uk
                - TZ=Europe/London
                network_mode: "bridge"
        sonarr:
                image: lsiodev/sonarr:preview
                container_name: sonarr
                volumes:
                - /home/terry/downloads:/done
                - /dockerfiles/sonarr:/config
                - /home/terry/downloads:/downloads
                - /mnt/RAID/TV:/tv
                - /dev/rtc:/dev/rtc:ro
                restart: always
                ports:
                - 8989:8989
                environment:
                - PGID=501
                - PUID=501
                - LETSENCRYPT_HOST=sonarr.thechurchills.org.uk
                - LETSENCRYPT_EMAIL=terry@thechurchills.org.uk
                - VIRTUAL_HOST=sonarr.thechurchills.org.uk
                - TZ=Europe/London
                network_mode: "bridge"
        sufr:
                image: kyleterry/sufr
                container_name: sufr
                volumes:
                - /dockerfiles/sufrdb:/root/.config/sufr/data/
                restart: always
                ports:
                - 8090:8090
                environment:
                - PGID=501
                - PUID=501
                - LETSENCRYPT_HOST=sufr.thechurchills.org.uk
                - LETSENCRYPT_EMAIL=terry@thechurchills.org.uk
                - VIRTUAL_HOST=sufr.thechurchills.org.uk
                - TZ=Europe/London
                network_mode: "bridge"
        embyserver:
                image: emby/embyserver
                container_name: embyserver
                volumes:
                - /dockerfiles/emby/config:/config
                - /mnt/embyusb/cache:/config/cache
                - /mnt/embyusb/data:/config/data
                - /mnt/RAID/TV:/mnt/tv
                - /mnt/RAID/Movies:/mnt/movies
                - /mnt/RAID/Photos:/mnt/photos
                - /mnt/RAID/ebooks:/mnt/books
                - /mnt/RAID/recordings:/mnt/recordings
                - /dockerfiles/emby-sync:/mnt/emby-sync
                - /dockerfiles/emby-backup/:/backup
                devices:
                - "/dev/dri/renderD128"
                ports:
                - 8096:8096
                - 8920:8920
                environment:
                - UID=501
                - GID=501
                - GIDLIST=44,501
                - LETSENCRYPT_HOST=emby.thechurchills.org.uk
                - LETSENCRYPT_EMAIL=terry@thechurchills.org.uk
                - VIRTUAL_HOST=emby.thechurchills.org.uk
                - VIRTUAL_PORT="8096"
                network_mode: "host"
        smtp:
                image: namshi/smtp
                container_name: smtp
                environment:
                - SES_USER=
                - SES_PASSWORD=
                - SES_REGION=eu-west-1
                - RELAY_NETWORKS=:192.168.0.0/24
                network_mode: "bridge"
                ports:
                        - "8000:25"
        mariadb:
                image: mariadb:latest
                container_name: mariadb
                volumes:
                - /dockerfiles/mariadb:/var/lib/mysql
                ports:
                - 3306:3306
                environment:
                - PUID=501
                - PGID=501
                - TZ=Europe/London
                network_mode: "host"
        portainer:
                image: portainer/portainer
                container_name: portainer
                volumes:
                - /dockerfiles/portainer/:/data
                - /var/run/docker.sock:/tmp/docker.sock
                environment:
                - LETSENCRYPT_HOST=portainer.thechurchills.org.uk
                - LETSENCRYPT_EMAIL=terry@thechurchills.org.uk
                - VIRTUAL_HOST=portainer.thechurchills.org.uk
                - VIRTUAL_PORT="9000"
                network_mode: "bridge"
        adguard:
                container_name: adguard
                image: adguard/adguardhome:latest
                ports:
                  - "53:53/tcp"
                  - "53:53/udp"
                  - "67:67/udp"
                  - "68:68/udp"
                  - "8240:8240/tcp"
                  - "3000:3000/tcp"
                  - "853:853/tcp"
                environment:
                - TZ=Europe/London
                - LETSENCRYPT_HOST=adguard.thechurchills.org.uk
                - LETSENCRYPT_EMAIL:terry@thechurchills.org.uk
                - VIRTUAL_HOST=adguard.thechurchills.org.uk
                - VIRTUAL_PORT="8240"
                # Volumes store your data between container upgrades
                volumes:
                - /dockerfiles/adguard/workdir:/opt/adguardhome/work
                - /dockerfiles/adguard/confdir:/opt/adguardhome/conf
                network_mode: "bridge"
        lazy:
                image: linuxserver/lazylibrarian
                container_name: lazy
                volumes:
                - /dockerfiles/lazylibrarian:/config
                - /home/terry/downloads/EBooks/:/downloads
                - /mnt/RAID/ebooks/:/books
                environment:
                - PUID=501
                - PGID=501
                - TZ=Europe/London
                - LETSENCRYPT_HOST=lazy.thechurchills.org.uk
                - LETSENCRYPT_EMAIL=terry@thechurchills.org.uk
                - VIRTUAL_HOST=lazy.thechurchills.org.uk
                - VIRTUAL_PORT="5299"
                network_mode: "bridge"
        books:
                image: linuxserver/calibre-web
                container_name: books
                volumes:
                - /dockerfiles/books/config:/config
                - /mnt/RAID/calibre-library:/books
                environment:
                - DOCKER_MODS=linuxserver/calibre-web:calibre
                - PUID=501
                - PGID=501
                - TZ=Europe/London
                - LETSENCRYPT_HOST=books.thechurchills.org.uk
                - LETSENCRYPT_EMAIL=terry@thechurchills.org.uk
                - VIRTUAL_HOST=books.thechurchills.org.uk
                - VIRTUAL_PORT="8083"
                network_mode: "bridge"
        apps:
                image: linuxserver/heimdall:latest
                container_name: apps
                volumes:
                - /etc/localtime:/etc/localtime:ro
                - /dockerfiles/heimdall:/config
                ports:
                  - 8095:80
                environment:
                - PUID=501
                - PGID=501
                - TZ=Europe/London
                - LETSENCRYPT_HOST=apps.thechurchills.org.uk
                - LETSENCRYPT_EMAIL=terry@thechurchills.org.uk
                - VIRTUAL_HOST=apps.thechurchills.org.uk
                network_mode: "bridge"
        booksonic:
                image: linuxserver/booksonic:latest
                container_name: booksonic
                volumes:
                - /etc/localtime:/etc/localtime:ro
                - /dockerfiles/booksonic:/config
                - /mnt/RAID/ebooks/audio:/audiobooks
                - /mnt/RAID/podcasts/:/podcasts
                ports:
                  - 4040:4040
                environment:
                - PUID=501
                - PGID=501
                - TZ=Europe/London
                - LETSENCRYPT_HOST=booksonic.thechurchills.org.uk
                - LETSENCRYPT_EMAIL=terry@thechurchills.org.uk
                - VIRTUAL_HOST=booksonic.thechurchills.org.uk
                network_mode: "bridge"
